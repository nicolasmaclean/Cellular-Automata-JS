(this["webpackJsonpreact-ca"]=this["webpackJsonpreact-ca"]||[]).push([[0],{1:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return l})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return h})),i.d(t,"h",(function(){return f})),i.d(t,"d",(function(){return v.a}));var n=i(2),o=i(3),r=function(){function e(t){Object(n.a)(this,e),this.configs=t,this.configs.fps=t.fps,this.configs.fpsStep=t.fpsStep,this.viewer=new f(t),this.Instantiate()}return Object(o.a)(e,[{key:"Instantiate",value:function(){this.configs.CellularAutomata=new a(this.configs),this.step=!1,this.needDraw=!0,this.cellColorsLength=Object.keys(this.configs.cellColors).length,this.coordsSet=[],this.lineCoordsDone=new c,this.lineCoordsAdd=new c,this.fpsInterval=1e3/this.configs.fps,this.fpsIntervalS=1e3/this.configs.fpsStep,this.lastFrame=0,this.lastFrameS=0}},{key:"ReInstantiate",value:function(e){this.configs=e,this.configs.paused=e.paused,this.configs.drawSpecificState=e.drawSpecificState,this.configs.drawState=e.drawState}},{key:"setDrawState",value:function(e){this.configs.drawState=e,this.configs.drawState>=this.cellColorsLength&&(this.configs.drawState=this.cellColorsLength-1)}},{key:"checkState",value:function(t){var i=Date.now(),n=i-this.lastFrame,o=Date.now(),r=o-this.lastFrameS;return!this.configs.paused&&this.configs.loopState===e.loopEnum.stepLoop&&n>this.fpsInterval?(t&&(this.lastFrame=i-n%this.fpsInterval),e.renderState.step):(this.configs.loopState!==e.loopEnum.stepLoop||this.configs.paused)&&this.step&&r>this.fpsIntervalS?(t&&(this.lastFrameS=o-r%this.fpsIntervalS,this.step=!1),e.renderState.step):(this.configs.paused||this.configs.loopState===e.loopEnum.drawLoop)&&this.needDraw||this.needDraw||!this.viewer.targetPos.equals(this.viewer.pos)?(t&&(this.needDraw=!1),e.renderState.draw):this.configs.loopState===e.loopEnum.noLoop?e.renderState.noLoop:e.renderState.nothing}},{key:"Update",value:function(t,i){var n=i.DrawCellFunc,o=i.DrawStyleFunc,r=i.PreStepFunc,s=i.PostStepFunc,a=this.checkState(!0);a===e.renderState.step?(this.handleInput(),this.PreStep(t,r),this.Step(),this.PostStep(t,s,o,n)):a===e.renderState.draw&&(this.handleInput(),this.Draw(t,r,s,o,n))}},{key:"drawGridData",value:function(){var e=this.configs.CellularAutomata.grid.createBatchObject();this.xBounds=new h(Math.floor(-this.viewer.pos.x/this.viewer.cellSize),Math.floor((-this.viewer.pos.x+this.configs.windowSize.x)/this.viewer.cellSize)),this.yBounds=new h(Math.floor(-this.viewer.pos.y/this.viewer.cellSize),Math.floor((-this.viewer.pos.y+this.configs.windowSize.y)/this.viewer.cellSize));for(var t=this.xBounds.x;t<=this.xBounds.y;t++)for(var i=this.yBounds.x;i<=this.yBounds.y;i++){var n=t*this.viewer.cellSize+this.viewer.pos.x,o=i*this.viewer.cellSize+this.viewer.pos.y,r=this.configs.CellularAutomata.getCell(new h(t,i)),s=this.configs.CellularAutomata.grid.cellColors[r];void 0!==r&&void 0!==s||console.log(r,s,t,i,n,o),e[s].push(new h(n,o))}return e}},{key:"handleInput",value:function(){var e=this;for(var t in c.difference(this.lineCoordsAdd,this.lineCoordsDone).forEach((function(t){e.configs.drawSpecificState?e.configs.CellularAutomata.setCell(t,e.configs.drawState):e.configs.CellularAutomata.cycleCell(t)})),this.lineCoordsDone.union(this.lineCoordsAdd),this.lineCoordsAdd=new c,this.coordsSet)this.configs.CellularAutomata.setCell(t[0],t[1])}},{key:"Step",value:function(){this.handleInput(),this.configs.CellularAutomata.step()}},{key:"Draw",value:function(e,t,i,n,o){this.PreStep(e,t),this.PostStep(e,i,n,o)}},{key:"PreStep",value:function(e,t){t(e,this.configs.clr_bg,this.configs.windowSize),this.viewer.Update()}},{key:"PostStep",value:function(t,i,n,o){var r=this.drawGridData(),s=this.viewer.cellSize;e.DrawGrid(r,s,t,n,o),i(t,this.configs.clr_bg,this.configs.windowSize)}}],[{key:"DrawGrid",value:function(e,t,i,n,o){for(var r in e)for(var s in n(i,r),e[r]){o(i,e[r][s],t)}}},{key:"fillJSObjectBlanks",value:function(t){var i=e.JSObjectDefault();void 0===t.width&&(t.width=i.width),void 0===t.height&&(t.height=i.height),void 0===t.windowSize&&(t.windowSize=new h(t.width,t.height)),void 0===t.x&&(t.x=i.x),void 0===t.y&&(t.y=i.y),void 0===t.position&&(t.position=new h(t.x,t.y)),void 0===t.mode&&(t.mode=i.mode),void 0===t.generation&&(t.generation=i.generation),void 0===t.clr_bg&&(t.clr_bg=i.clr_bg),void 0===t.loopState&&(t.loopState=i.loopState),void 0===t.paused&&(t.paused=i.paused),void 0===t.drawSpecificState&&(t.drawSpecificState=i.drawSpecificState),void 0===t.drawState&&(t.drawState=i.drawState),void 0===t.zoom&&(t.zoom=i.zoom),void 0===t.maxZoom&&(t.maxZoom=i.maxZoom),void 0===t.minZoom&&(t.minZoom=i.minZoom),void 0===t.fps&&(t.fps=i.fps),void 0===t.fpsStep&&(t.fpsStep=i.fpsStep),void 0===t.DrawCellFunc&&(t.DrawCellFunc=i.DrawCellFunc),void 0===t.DrawStyleFunc&&(t.DrawStyleFunc=i.DrawStyleFunc),void 0===t.PreStepFunc&&(t.PreStepFunc=i.PreStepFunc),void 0===t.PostStepFunc&&(t.PostStepFunc=i.PostStepFunc)}},{key:"JSObjectDefault",value:function(){var t={mode:"wire world",generation:0,width:700,height:600,x:0,y:0,clr_bg:"#c0c0c0",fps:10,fpsStep:20,loopState:e.loopEnum.stepLoop,paused:!1,drawSpecificState:!0,drawState:1,zoom:1,maxZoom:9,minZoom:.8,DrawCellFunc:function(e,t,i){e.fillRect(t.x,t.y,i-1,i-1)},DrawStyleFunc:function(e,t){e.fillStyle=t},PreStepFunc:function(e,t,i){e.fillStyle=t,e.fillRect(0,0,i.x,i.y)},PostStepFunc:function(e,t,i){e.strokeStyle=t,e.moveTo(1,1),e.lineTo(1,i.y-1),e.lineTo(i.x-1,i.y-1),e.lineTo(i.x-1,1),e.lineTo(1,1),e.stroke()}};t.windowSize=new h(t.width,t.height),t.position=new h(t.x,t.y);var i=h.div_int(t.windowSize,10*t.zoom);return i.div_int(2),t.position.add(i),t}},{key:"fillModesInObj",value:function(t){e.prebuiltModes.includes(t.mode)?(t.title=t.mode,t.cellColors=t.mode,t.rules=t.mode,t.stateNames=t.mode,t.ruleDescriptions=t.mode,t.subtitle="prebuilt"):("string"===typeof t.cellColors&&t.cellColors.toLowerCase(),"string"===typeof t.rules&&t.rules.toLowerCase(),"string"===typeof t.stateNames&&t.stateNames.toLowerCase(),"string"===typeof t.ruleDescriptions&&t.stateNames.toLowerCase()),"wire world"===t.cellColors?t.cellColors={0:"white",1:"yellow",2:"red",3:"black"}:"game of life"===t.cellColors&&(t.cellColors={0:"white",1:"black"}),"wire world"===t.rules?t.rules=[function(e,t){return[0===t,0]},function(e,t){return[1===t,2]},function(e,t){return[2===t,3]},function(e,t){var i=e.filter((function(e){return 1===e}));return i=i.length,[3===t,3===t&&(2===i||1===i)?1:3]}]:"game of life"===t.rules&&(t.rules=[function(e,t){var i=e.filter((function(e){return 1===e}));i=i.length;var n=1===t&&2===i||3===i;return[n,n?1:0]}]),"wire world"===t.stateNames?t.stateNames=["Background","Electron Head","Electron Tail","Wire"]:"game of life"===t.stateNames&&(t.stateNames=["Dead","Alive"]),"wire world"===t.title?t.title="Brian Silverman's Wire World":"game of life"===t.title&&(t.title="Conway's Game of Life"),"wire world"===t.ruleDescriptions?t.ruleDescriptions=["background ALWAYS remain background","electron head becomes electron tail","electron tail becomes wire","wire becomes electron head IF there are 1 or 2 neighboring electron heads"]:"game of life"===t.ruleDescriptions&&(t.ruleDescriptions=["(over population) live cells with 4 or more live neighbors 'dies'","(under population) live cells with less than 2 live neighbors 'dies'","(birth) dead cells with 3 live neighbors become alive","live cells with 2 or 3 neighbors remain alive"])}}]),e}();r.renderState={step:0,draw:1,nothing:2,noLoop:3},r.loopEnum={noLoop:0,drawLoop:1,stepLoop:2,step:3},r.prebuiltModes=["game of life","wire world"];var s=r,a=function(){function e(t){Object(n.a)(this,e),this.grid=new l(t.cellColors),this.configs=t}return Object(o.a)(e,[{key:"step",value:function(){var e=this,t=new Set,i=new Map;this.grid.forEach((function(n){e.grid.getNeighboringCells(n).forEach((function(i){e.grid.hasCell(i)||t.add(l.tostring(i))}));var o=e.applyRules(n);0!==o&&i.set(l.tostring(n),o)})),t.forEach((function(t){var n=l.unstring(t),o=e.applyRules(n);0!==o&&i.set(l.tostring(n),o)})),this.grid.setNewMap(i),this.grid.pruneDefaultValues(),this.configs.generation++}},{key:"applyRules",value:function(e){var t=this.grid.getNeighborsValues(e),i=this.getCell(e);for(var n in this.configs.rules){var o=this.configs.rules[n](t,i);if(o[0])return o[1]}return 0}},{key:"getCell",value:function(e){return this.grid.getCell(e)}},{key:"setCell",value:function(e,t){this.grid.setCell(e,t)}},{key:"cycleCell",value:function(e){this.grid.cycleCell(e)}}]),e}(),l=function(){function e(t){Object(n.a)(this,e),this.mat=new Map,this.cellStateAmt=Object.keys(t).length,this.cellColors=t}return Object(o.a)(e,[{key:"createBatchObject",value:function(){for(var e={},t=0;t<this.cellStateAmt;t++)e[this.cellColors[t]]=[];return e}},{key:"pruneDefaultValues",value:function(){var t=this;this.mat.forEach((function(i,n){0===i&&t.removeCell(e.unstring(n))}))}},{key:"getCell",value:function(t){var i=e.tostring(t);return this.hasCell(t)?this.mat.get(i):0}},{key:"hasCell",value:function(t){var i=e.tostring(t);return this.mat.has(i)}},{key:"setCell",value:function(t,i){var n=e.tostring(t);this.mat.set(n,i)}},{key:"setCells",value:function(e){var t=this;e.forEach((function(e){t.setCell(e[0],e[1])}))}},{key:"setCells_val",value:function(e,t){var i=this;e.forEach((function(e){i.setCell(e,t)}))}},{key:"removeCell",value:function(t){this.hasCell(t)&&this.mat.delete(e.tostring(t))}},{key:"getNeighboringCells",value:function(e){for(var t=[],i=-1;i<=1;i++)for(var n=-1;n<=1;n++)0===i&&0===n||t.push(new h(e.x+i,e.y+n));return t}},{key:"getNeighborsValues",value:function(e){for(var t=[],i=-1;i<=1;i++)for(var n=-1;n<=1;n++)0===i&&0===n||t.push(this.getCell(new h(e.x+i,e.y+n)));return t}},{key:"getLiveNeighbors",value:function(e){for(var t=0,i=-1;i<=1;i++)for(var n=-1;n<=1;n++)0===i&&0===n||!this.getCell(h.add(e,new h(i,n)))||t++;return t}},{key:"setNewMap",value:function(e){this.mat=e}},{key:"forEach",value:function(t){this.mat.forEach((function(i,n){var o=e.unstring(n);t(o)}))}},{key:"cycleCell",value:function(e){this.setCell(e,(this.getCell(e)+1)%this.cellStateAmt)}}],[{key:"tostring",value:function(e){return e.x+" "+e.y}},{key:"unstring",value:function(e){var t=e.split(" ");return new h(parseFloat(t[0]),parseFloat(t[1]))}}]),e}(),c=function(){function e(){Object(n.a)(this,e),this.arr=[]}return Object(o.a)(e,[{key:"loadSet",value:function(e){var t=this;e.forEach((function(e){t.arr.push(e)}))}},{key:"get",value:function(e){return this.arr[e]}},{key:"add",value:function(e){this.has(e)||this.arr.push(e)}},{key:"has",value:function(e){return-1!==this.search(e)}},{key:"size",value:function(){return this.arr.length}},{key:"delete",value:function(e){this.arr.splice(e,1)}},{key:"search",value:function(e){for(var t=0;t<this.arr.length;t++)if(this.get(t).equals(e))return t;return-1}},{key:"forEach",value:function(e){for(var t=0;t<this.arr.length;t++){e(this.get(t))}}},{key:"union",value:function(e){var t=this;0!==e.size&&(0===this.size?this.arr=e.arr:e.forEach((function(e){t.add(e)})))}},{key:"difference",value:function(e){if(0!==this.size&&0!==e.size)for(var t=e.arr.length-1;t>=0;t--){var i=e.get(t),n=this.search(i);-1!==n&&this.delete(n)}}},{key:"intersect",value:function(t){this.arr=e.intersect(this,t).arr}},{key:"log",value:function(){console.log(this.arr)}},{key:"toString",value:function(){var e="[";return this.forEach((function(t){e+=t+" "})),e=e.trim(),e+="]"}}],[{key:"union",value:function(t,i){if(0===i.size)return t;if(0===t.size)return i;var n=new e;return n.loadSet(t),i.forEach((function(e){n.add(e)})),n}},{key:"difference",value:function(t,i){if(0===t.size||0===i.size)return t;var n=new e;n.loadSet(t);for(var o=i.arr.length-1;o>=0;o--){var r=i.get(o),s=t.search(r);-1!==s&&n.delete(s)}return n}},{key:"intersect",value:function(t,i){if(0===t.size||0===i)return new e;var n=new e;return t.forEach((function(e){i.has(e)&&n.add(e)})),n}}]),e}(),u=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;Object(n.a)(this,e),this.render=t,this.viewer=t.viewer,this.scrollDivider=i,this.keybinds={pause:"p",step:" ",grabCanvas:"o",drawSpecificState:"i"},this.eventsDidAttach=!1,this.mouse_grabbing=!1,this.grabCanvas=!0}return Object(o.a)(e,[{key:"ReInitialize",value:function(e,t){this.render=e,this.viewer=t}},{key:"attachEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.eventsDidAttach||(this.eventsDidAttach=!0,i&&this.attachMouseEvent(e),t&&this.attachKeyEvents())}},{key:"attachMouseEvent",value:function(e){e.onmousemove=function(e){this.mouseMove(e)}.bind(this),e.onmousedown=function(e){this.grabCanvas?this.grabGrid():this.startDrawing(e)}.bind(this),e.onmouseup=function(e){this.grabCanvas?this.releaseGrid():this.toggleCellHandler(e)}.bind(this),e.onmouseleave=function(e){this.releaseGrid(),this.stopDrawing(),this.disableCursorStyle()}.bind(this),e.onmouseenter=function(e){this.enableCursorStyle()}.bind(this),e.onwheel=function(e){this.mouseScrollHandler(e)}.bind(this)}},{key:"attachKeyEvents",value:function(){document.onkeyup=function(t){t.key===this.keybinds.step?this.singleStep():t.key!==this.keybinds.pause||t.repeat?t.key!==this.keybinds.grabCanvas||t.repeat?t.key!==this.keybinds.drawSpecificState||t.repeat?e.NUMKEYS.includes(t.key)?this.setSpecificStateHandeler(t):"t"===t.key&&console.log(this.render):this.drawSpecificStateToggle():this.grabCanvasToggle():this.pauseToggle()}.bind(this)}},{key:"mouseMove",value:function(e){this.grabCanvas&&1===e.buttons&&this.mouse_grabbing?this.moveGridHandeler(e):this.grabCanvas||1!==e.buttons||this.drawCellsHandeler(e)}},{key:"moveGridHandeler",value:function(e){this.moveGrid(new h(e.movementX,e.movementY))}},{key:"moveGrid",value:function(e){this.viewer.targetPos.add(new h(e.x,e.y)),this.render.needDraw=!0}},{key:"grabGrid",value:function(){this.mouse_grabbing=!0}},{key:"releaseGrid",value:function(){this.mouse_grabbing=!1}},{key:"mouseScrollHandler",value:function(e){this.zoom(-e.deltaY/this.scrollDivider)}},{key:"zoom",value:function(e){this.viewer.addZoom(e),this.render.needDraw=!0}},{key:"drawCellsHandeler",value:function(e){this.drawCells(new h(e.offsetX,e.offsetY))}},{key:"startDrawingHandeler",value:function(e){this.startDrawing(new h(e.clientX,e.clientY))}},{key:"startDrawing",value:function(e){this.render.needDraw=!0}},{key:"drawCells",value:function(t){var i=this,n=new h(t.x,t.y);if(n=this.viewer.screenToGrid(n),0!==this.render.lineCoordsDone.size()){var o=this.render.lineCoordsDone.get(this.render.lineCoordsDone.size()-1),r=h.abs(h.sub(n,o));if(r.x>1||r.y>1)e.lineGen(o,n).forEach((function(e){i.render.lineCoordsAdd.add(e)}))}this.render.lineCoordsAdd.add(n),this.render.needDraw=!0}},{key:"stopDrawing",value:function(){this.render.lineCoordsDone=new c,this.render.lineCoordsAdd=new c}},{key:"toggleCellHandler",value:function(e){this.toggleCell(new h(e.offsetX,e.offsetY))}},{key:"toggleCell",value:function(e){var t=this.viewer.screenToGrid(e);0===this.render.lineCoordsDone.size()&&(this.render.configs.drawSpecificState?this.render.configs.CellularAutomata.setCell(t,this.render.configs.drawState):this.render.configs.CellularAutomata.cycleCell(t),this.render.needDraw=!0),this.stopDrawing()}},{key:"singleStep",value:function(){this.render.step=!0}},{key:"pauseToggle",value:function(){this.render.configs.paused=!this.render.configs.paused}},{key:"grabCanvasToggle",value:function(){this.grabCanvas=!this.grabCanvas,this.enableCursorStyle()}},{key:"drawSpecificStateToggle",value:function(){this.render.configs.drawSpecificState=!this.render.configs.drawSpecificState}},{key:"setSpecificStateHandeler",value:function(e){this.setSpecificState(e.key)}},{key:"setSpecificState",value:function(e){this.render.setDrawState(Number(e))}},{key:"enableCursorStyle",value:function(){this.grabCanvas?document.body.style.cursor="grab":this.render.drawSpecificState?document.body.style.cursor="pointer":document.body.style.cursor="crossHair"}},{key:"disableCursorStyle",value:function(){document.body.style.cursor="initial"}}],[{key:"lineGen",value:function(t,i){var n=Math.floor(t.x),o=Math.floor(t.y),r=Math.floor(i.x),s=Math.floor(i.y);return Math.abs(s-o)<Math.abs(r-n)?n>r?e.plotLineLow(r,s,n,o):e.plotLineLow(n,o,r,s):o>s?e.plotLineHigh(r,s,n,o):e.plotLineHigh(n,o,r,s)}},{key:"plotLineHigh",value:function(e,t,i,n){var o=i-e,r=n-t,s=1,a=new c;o<0&&(s=-1,o=-o);for(var l=2*o-r,u=e,d=t;d<=n;d++)a.add(new h(u,d)),l>0?(u+=s,l+=2*(o-r)):l+=2*o;return a}},{key:"plotLineLow",value:function(e,t,i,n){var o=i-e,r=n-t,s=1,a=new c;r<0&&(s=-1,r=-r);for(var l=2*r-o,u=t,d=e;d<=i;d++)a.add(new h(d,u)),l>0?(u+=s,l+=2*(r-o)):l+=2*r;return a}}]),e}();u.NUMKEYS=["0","1","2","3","4","5","6","7","8","9"];var d=u,h=function(){function e(t,i){Object(n.a)(this,e),this.x=t,this.y=i}return Object(o.a)(e,[{key:"add",value:function(e){this.x+=e.x,this.y+=e.y}},{key:"sub",value:function(e){this.x-=e.x,this.y-=e.y}},{key:"mult",value:function(e){this.x*=e.x,this.y*=e.y}},{key:"div",value:function(e){this.x/=e.x,this.y/=e.y}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"add_int",value:function(e){this.x+=e,this.y+=e}},{key:"sub_int",value:function(e){this.x-=e,this.y-=e}},{key:"mult_int",value:function(e){this.x*=e,this.y*=e}},{key:"div_int",value:function(e){this.x/=e,this.y/=e}},{key:"equals_int",value:function(e){return this.x===e&&this.y===e}},{key:"floor",value:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)}},{key:"ceil",value:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)}},{key:"abs",value:function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)}},{key:"copy",value:function(){var t=new e;return t.x=this.x,t.y=this.y,t}},{key:"lerp",value:function(t,i){var n=e.sub(t,this);n.mult_int(i),this.add(n)}},{key:"toString",value:function(){return"["+this.x+", "+this.y+"]"}}],[{key:"add",value:function(t,i){return new e(t.x+i.x,t.y+i.y)}},{key:"sub",value:function(t,i){return new e(t.x-i.x,t.y-i.y)}},{key:"mult",value:function(t,i){return new e(t.x*i.x,t.y*i.y)}},{key:"div",value:function(t,i){return new e(t.x/i.x,t.y/i.y)}},{key:"add_int",value:function(t,i){return new e(t.x+i,t.y+i)}},{key:"sub_int",value:function(t,i){return new e(t.x-i,t.y-i)}},{key:"mult_int",value:function(t,i){return new e(t.x*i,t.y*i)}},{key:"div_int",value:function(t,i){return new e(t.x/i,t.y/i)}},{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"zero",value:function(){return new e(0,0)}},{key:"floor",value:function(t){return new e(Math.floor(t.x),Math.floor(t.y))}},{key:"ceil",value:function(t){return new e(Math.ceil(t.x),Math.ceil(t.y))}},{key:"abs",value:function(t){return new e(Math.abs(t.x),Math.abs(t.y))}},{key:"lerp",value:function(t,i,n){var o=e.sub(i,t);return o.mult_int(n),o.add(t),o}},{key:"distance",value:function(t,i){var n=e.sub(t,i),o=n.x*n.x+n.y*n.y;return Math.sqrt(o)}},{key:"distanceSQ",value:function(t,i){var n=e.sub(t,i);return n.x*n.x+n.y*n.y}}]),e}(),f=function(){function e(t){Object(n.a)(this,e),this.configs=t,this.pos=new h(0,0),this.targetPos=this.pos.copy(),this.zoom=t.zoom,this.maxZoom=t.maxZoom,this.minZoom=t.minZoom,this.lerpFactor=.2,this.defaultCellSize=10,this.cellSize=this.defaultCellSize*this.zoom,this.moveToPosInstant(t.position)}return Object(o.a)(e,[{key:"setZoom",value:function(e){var t=this.zoom;this.zoom=e,this.zoom<this.minZoom?this.zoom=this.minZoom:this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),t=this.zoom>t?-(this.zoom-t)/t:(t-this.zoom)/this.zoom,this.targetPos.add(new h(this.configs.windowSize.x*t/4,this.configs.windowSize.y*t/4)),this.cellSize=this.defaultCellSize*this.zoom}},{key:"addZoom",value:function(e){this.setZoom(this.zoom+e)}},{key:"screenToGrid",value:function(e){var t=h.sub(e,this.pos);return t.div_int(this.cellSize),t=h.floor(t)}},{key:"gridToScreen",value:function(e){var t=e.copy();return t.mult_int(this.cellSize),t.add(this.pos),t}},{key:"gridPosition",value:function(){var e=this.pos.copy();return e.div_int(this.cellSize),e.ceil(),e.x=-e.x,e}},{key:"moveToOrigin",value:function(){this.moveToPos(new h(0,0))}},{key:"moveToPos",value:function(e){var t=this.translateCoordToCenterScreen(e);t=this.gridToScreen(t),this.targetPos=t}},{key:"moveToPosInstant",value:function(e){var t=e;this.targetPos=t,this.pos=t}},{key:"translateCoordToCenterScreen",value:function(e){var t=h.div_int(this.configs.windowSize,this.cellSize);return t.div_int(2),h.add(e,t)}},{key:"Update",value:function(){h.distanceSQ(this.pos,this.targetPos)<1?this.pos=this.targetPos:this.pos.lerp(this.targetPos,this.lerpFactor)}}]),e}(),v=i(9)},16:function(e,t,i){},17:function(e,t,i){"use strict";i.r(t);var n=i(0),o=i(4),r=i.n(o),s=i(10),a=i.n(s),l=(i(16),i(2)),c=i(3),u=i(7),d=i(6),h=i(5),f=i(1),v=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var o;Object(l.a)(this,i),(o=t.call(this,e)).canvasRef=r.a.createRef(),o.requestIdRef=r.a.createRef(),o.dataRef=r.a.createRef(),o.inputRef=r.a.createRef(),o.configs=e.configs,o.ogConfigs=Object.assign({},e.configs),void 0===o.configs?o.configs=f.a.JSObjectDefault():f.a.fillJSObjectBlanks(o.configs),f.a.fillModesInObj(o.configs),o.renderer=new f.a(o.configs),o.userInput=new f.f(o.renderer);var s=[];return o.props.gridInputEnabled&&s.push(Object(n.jsx)(p,{className:"CAGridInput",ref:o.inputRef,parentRef:Object(u.a)(o)},3)),o.child=Object(n.jsxs)("div",{className:"flexRow wholeDeal",children:[Object(n.jsx)("canvas",{className:"glCanvas flexItem",ref:o.canvasRef,width:o.configs.width,height:o.configs.height},1),Object(n.jsx)("div",{className:"CAPerp flexItem",children:s})]}),o.state={needDraw:0},o}return Object(c.a)(i,[{key:"tick",value:function(){if(this.canvasRef.current){var e=this.renderer.checkState(!1);this.renderer.Update(this.draw,this.configs),e!==f.a.renderState.nothing&&this.props.gridInputEnabled&&this.inputRef.current.forceUpdate(),this.configs.loopState!==f.a.loopEnum.noLoop&&(this.requestIdRef.current=requestAnimationFrame(this.tick.bind(this)))}}},{key:"componentDidMount",value:function(){this.draw=this.canvasRef.current.getContext("2d"),this.userInput.attachEvents(this.canvasRef.current),requestAnimationFrame(this.tick.bind(this))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.requestIdRef.current)}},{key:"render",value:function(){return this.child}}]),i}(r.a.Component),p=(r.a.Component,function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;Object(l.a)(this,i),n=t.call(this,e);var o=f.a.prebuiltModes.indexOf(e.parentRef.renderer.configs.mode);return n.state={mode:-1===o?f.a.prebuiltModes.length:o,modeLength:-1===o?f.a.prebuiltModes.length+1:f.a.prebuiltModes.length},n.modes={},n.modes[n.state.mode]=e.parentRef.renderer,n}return Object(c.a)(i,[{key:"render",value:function(){var e=this,t=this.props.parentRef.renderer,i=this.props.parentRef.userInput,o=t.configs.CellularAutomata.grid,r=t.configs.paused?"Paused":"Playing",s=i.grabCanvas?"Move":"Draw",a=[],l=[],c=0,u=function(e){a.push(Object(n.jsxs)("div",{className:"cellState flexCol",children:[Object(n.jsx)("div",{className:"cellStateBackground",style:{backgroundColor:o.cellColors[e]},onClick:function(){return i.setSpecificState(e)}}),Object(n.jsxs)("h3",{className:"cellStateName",children:[" ",t.configs.stateNames[e]]})]},0-c)),c++};for(var d in o.cellColors)u(d);for(var h in t.configs.ruleDescriptions)l.push(Object(n.jsx)("div",{className:"ruleDescription",children:Object(n.jsx)("h3",{className:"rule",children:t.configs.ruleDescriptions[h]})},0-c)),c++;return Object(n.jsxs)("div",{className:"gridInput",children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsxs)("div",{className:"flexRow contentLeft noPadding",children:[Object(n.jsxs)("h1",{className:"title noMargin",children:[" ",t.configs.title," "]}),Object(n.jsx)("button",{className:"arrowButton",onClick:function(){var t=e.state.mode+1;if(t%=e.state.modeLength,void 0===e.modes[t]){var i={width:e.props.parentRef.ogConfigs.width,height:e.props.parentRef.ogConfigs.height,mode:f.a.prebuiltModes[t]};f.a.fillJSObjectBlanks(i),f.a.fillModesInObj(i);var n=new f.a(i);e.modes[t]=n}e.modes[t].needDraw=!0,e.props.parentRef.configs=e.modes[t].configs,e.props.parentRef.renderer=e.modes[t],e.props.parentRef.userInput.ReInitialize(e.modes[t],e.modes[t].viewer),document.querySelector("#CASubtitleInput").value=e.modes[t].configs.subtitle,e.setState({mode:t})}})]}),Object(n.jsx)("div",{className:"subheader",children:Object(n.jsx)("input",{id:"CASubtitleInput",className:"inputText",type:"text",defaultValue:t.configs.subtitle,onChange:function(e){console.log(t.configs.subtitle),t.configs.subtitle=e.target.value,console.log(t.configs.subtitle)}})})]}),Object(n.jsxs)("div",{className:"grid",children:[Object(n.jsx)("div",{className:"statePicker",children:a}),Object(n.jsx)("div",{className:"onePaddingLeft",children:Object(n.jsxs)("h2",{children:[" Generation: ",t.configs.generation," "]})}),Object(n.jsxs)("div",{className:"flexRow contentLeft",children:[Object(n.jsx)("button",{className:"button "+r,onClick:function(){i.pauseToggle(),e.forceUpdate()},children:r}),Object(n.jsx)("button",{className:"button fade",onClick:function(){i.singleStep()},disabled:!t.configs.paused,children:"Step Once"})]}),Object(n.jsxs)("div",{className:"flexRow contentLeft",children:[Object(n.jsx)("button",{className:"button "+s,onClick:function(){i.grabCanvasToggle(),e.forceUpdate()},children:s}),Object(n.jsx)("button",{className:"button clear",onClick:function(){t.Instantiate(),t.configs.generation=0,e.forceUpdate()},children:"Clear"}),Object(n.jsx)("button",{className:"button save",onClick:function(){f.d.SaveCARender(t),e.forceUpdate()},children:"Save"})]}),Object(n.jsxs)("div",{className:"flexRow contentLeft",children:[Object(n.jsx)("button",{className:"button load",onClick:function(){f.d.LoadCARender(document.querySelector("#CAFileUpload").files[0],(function(t){t.windowSize=e.props.parentRef.configs.windowSize;var i=t.CellularAutomata,n=Object.keys(e.modes).length,o=new f.a(t);o.configs.CellularAutomata.grid.setNewMap(i),e.modes[n]=o,e.modes[n].needDraw=!0,e.props.parentRef.configs=e.modes[n].configs,e.props.parentRef.renderer=e.modes[n],e.props.parentRef.userInput.ReInitialize(e.modes[n],e.modes[n].viewer),e.setState({mode:n,modeLength:n+1}),document.querySelector("#CASubtitleInput").value=e.modes[n].configs.subtitle,e.forceUpdate()}))},children:"Load"}),Object(n.jsx)("input",{type:"file",className:"file",id:"CAFileUpload",accept:"application/json"}),Object(n.jsx)("button",{className:"button fileButton",onClick:function(){document.querySelector("#CAFileUpload").click()},children:"Browse"})]}),Object(n.jsx)("div",{className:"onePaddingLeft",children:Object(n.jsx)("h2",{children:document.querySelector("#CAFileUpload")&&0!==document.querySelector("#CAFileUpload").files.length?document.querySelector("#CAFileUpload").files[0].name:"No File Selected"})}),Object(n.jsxs)("div",{className:"ruleDescriptions",children:[Object(n.jsx)("h2",{children:"Rules"}),l]})]})]})}}]),i}(r.a.Component)),g=r.a.createRef(),m={width:.5*window.innerWidth,height:.75*window.innerHeight},y=Object(n.jsx)(v,{configs:m,ref:g,gridDataEnabled:!0,gridInputEnabled:!0}),w=Object(n.jsx)("div",{id:"group",children:y});a.a.render(w,document.getElementById("root"))},9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return JSONConverter}));var C_Users_nicol_Documents_GitHub_Cellular_Automata_JS_examples_React_react_ca_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),C_Users_nicol_Documents_GitHub_Cellular_Automata_JS_examples_React_react_ca_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_import__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),JSONConverter=function(){function JSONConverter(){Object(C_Users_nicol_Documents_GitHub_Cellular_Automata_JS_examples_React_react_ca_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,JSONConverter)}return Object(C_Users_nicol_Documents_GitHub_Cellular_Automata_JS_examples_React_react_ca_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(JSONConverter,null,[{key:"JSToJSON",value:function(e){return JSON.stringify(e,(function(t,i){var n;return i instanceof Function||"function"==typeof i?(n=String(i)).length<8||"function"!==n.substring(0,8)?"_NuFrRa_"+n:n:i instanceof RegExp?"_PxEgEr_"+i:i instanceof _import__WEBPACK_IMPORTED_MODULE_2__.g?"_Vector_"+i:i instanceof _import__WEBPACK_IMPORTED_MODULE_2__.b?"_CellAu_"+JSON.stringify(JSONConverter.packageMapByState(i.grid.mat,Object.keys(e.cellColors).length)):i}))}},{key:"packageMapByState",value:function(e,t){for(var i={},n=0;n<t;n++)i[n]=[];return e.forEach((function(e,t,n){i[e].push(t)})),i}},{key:"unpackageMapByState",value:function(e){var t=JSON.parse(e),i=new Map;for(var n in t)for(var o in t[n])i.set(t[n][o],Number(n));return i}},{key:"JSONToJS",value:function JSONToJS(string){return JSON.parse(string,(function(key,value){var prefix;if("string"!=typeof value)return value;if(value.length<8)return value;if(prefix=value.substring(0,8),"function"===prefix)return eval("("+value+")");if("_PxEgEr_"===prefix)return eval(value.slice(8));if("_NuFrRa_"===prefix)return eval(value.slice(8));if("_Vector_"===prefix){var VectorArr=eval(value.slice(8));return new _import__WEBPACK_IMPORTED_MODULE_2__.g(VectorArr[0],VectorArr[1])}return"_CellAu_"===prefix?JSONConverter.unpackageMapByState(value.slice(8)):value}))}},{key:"ConvertToJSONFile",value:function(e){var t=JSONConverter.JSToJSON(e),i=new Blob([t],{type:"application/json"});JSONConverter.saveBlob(i,"save.json")}},{key:"saveBlob",value:function(e,t){var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";var n=window.URL.createObjectURL(e);i.href=n,i.download=t,i.click(),window.URL.revokeObjectURL(n)}},{key:"SaveCARender",value:function(e){var t=Object.assign({},e.configs);t.paused=e.paused,t.drawSpecificState=e.drawSpecificState,t.drawState=e.drawState,JSONConverter.ConvertToJSONFile(t)}},{key:"LoadCARender",value:function(e,t){void 0!==e&&(e.text(),e.text().then((function(e){var i=JSONConverter.JSONToJS(e);t(i)})))}},{key:"LoadCARenderFromObj",value:function(e,t){var i=t.CellularAutomata;t.CellularAutomata=new _import__WEBPACK_IMPORTED_MODULE_2__.b(t),t.CellularAutomata.grid.setNewMap(i),e.ReInstantiate(t)}}]),JSONConverter}()}},[[17,1,2]]]);
//# sourceMappingURL=main.44c01fa5.chunk.js.map